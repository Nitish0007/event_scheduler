<!-- Sidebar Overlay -->
<div 
  data-sidebar-target="overlay"
  data-action="click->sidebar#close"
  class="sidebar-overlay fixed inset-0 bg-gray bg-opacity-50 z-40 transition-opacity duration-300 ease-in-out hidden" 
  id="sidebarOverlay"
></div>

<aside 
  data-sidebar-target="sidebar"
  class="sidebar fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out z-50" 
  id="sidebar"
>
  <div class="flex flex-col h-full">
    <!-- Sidebar Header -->
    <div class="flex items-center justify-between p-3 border-b border-gray-200">
      <h2 class="text-lg font-semibold text-blue-600">EventScheduler</h2>
      <button 
        data-action="click->sidebar#close"
        data-sidebar-target="close"
        class="sidebar-close-btn p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" 
        id="sidebarClose" 
        aria-label="Close sidebar"
      >
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Sidebar Navigation -->
    <nav class="flex-1 px-4 py-6 space-y-2">
      <% sidebar_items = Sidebar.sidebar_items(current_user) %>
      <% sidebar_items.each do |key, item| %>
        <a href="<%= item['path'] %>" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-gray-900 rounded-md transition-colors duration-200">
          <svg class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="<%= item['icon'] %>" />
          </svg>
          <%= item['title'] %>
        </a>
      <% end %>
    </nav>

    <!-- Sidebar Footer -->
    <% if current_user %>
      <div class="border-t border-gray-200 p-4">
        <% logout_path = current_user.role.to_s == "organizer" ? organizer_sign_out_path : customer_sign_out_path %>

        <%= button_to logout_path, method: :delete, class: "w-full text-left", form: { class: "w-full" } do %>
          <div class="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 hover:text-red-700 rounded-md transition-colors duration-200">
            <svg class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
            Logout
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</aside>